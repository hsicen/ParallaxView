package com.hsicen.parallaxviewimport android.content.Intentimport android.content.res.Resourcesimport android.graphics.Colorimport android.os.Bundleimport android.util.TypedValueimport android.view.ViewGroupimport android.widget.ImageViewimport androidx.activity.ComponentActivityimport androidx.activity.enableEdgeToEdgeimport androidx.activity.viewModelsimport androidx.appcompat.app.AppCompatActivityimport com.bumptech.glide.Glideimport com.google.android.material.imageview.ShapeableImageViewimport com.google.android.material.shape.ShapeAppearanceModelclass SampleList2 : AppCompatActivity() {  companion object {    fun start(act: ComponentActivity) {      act.startActivity(Intent(act, SampleList2::class.java))    }  }  private val mViewModel by viewModels<SimpleViewModel>()  private val mParallaxView by lazy {    ParallaxView(this).apply {      setBackgroundColor(Color.GRAY)    }  }  private val mAdapter by lazy {    object : ParallaxViewAdapter {      override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ParallaxViewHolder {        return ParallaxViewHolder(          ShapeableImageView(parent.context).apply {            val w = 120.dp2px            val h = 150.dp2px            val radius = 15f.dp2px            layoutParams = ViewGroup.MarginLayoutParams(w, h)            shapeAppearanceModel = ShapeAppearanceModel()              .withCornerSize(radius)            scaleType = ImageView.ScaleType.CENTER_CROP          })      }      override fun onBindViewHolder(holder: ParallaxViewHolder, position: Int, data: ParallaxData) {        Glide.with(holder.root)          .load(data.img)          .into(holder.root as ImageView)      }    }  }  override fun onCreate(savedInstanceState: Bundle?) {    super.onCreate(savedInstanceState)    enableEdgeToEdge()    setContentView(      mParallaxView, ViewGroup.MarginLayoutParams(        ViewGroup.LayoutParams.MATCH_PARENT,        ViewGroup.LayoutParams.WRAP_CONTENT      ).apply {        topMargin = 80.dp2px      }    )    mParallaxView.addConfig(      ParallaxViewConfig(        itemMargin = 10.dp2px,        autoLoop = true,        reverse = true,        direction = ParallaxDirection.Forward,        parallaxAdapter = mAdapter      )    ).build()    lifecycle.addObserver(mParallaxView)    mParallaxView.updateData(mViewModel.provideData())  }  override fun onDestroy() {    lifecycle.removeObserver(mParallaxView)    super.onDestroy()  }  inline val Int.dp2px: Int    get() = TypedValue.applyDimension(      TypedValue.COMPLEX_UNIT_DIP, this * 1.0f, Resources.getSystem().displayMetrics    ).toInt()  private inline val Float.dp2px: Float    get() = TypedValue.applyDimension(      TypedValue.COMPLEX_UNIT_DIP, this, Resources.getSystem().displayMetrics    )}